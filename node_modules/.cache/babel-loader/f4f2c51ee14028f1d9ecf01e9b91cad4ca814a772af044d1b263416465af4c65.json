{"ast":null,"code":"import _slicedToArray from\"/Users/praneetheraganaboina/Desktop/Learnings/PRJ_R/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import loginStyle from\"./Login.module.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var users=null;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedin=_useState2[0],setloggedin=_useState2[1];useEffect(function(){try{axios.get(\"http://127.0.0.1:5000/login\").then(function(res){console.log(\"result=\",res);users=res;console.log(\"users\",users);});}catch(e){console.log(e);}},[loggedin]);var navigate=useNavigate();var username=useRef(\"\");var password=useRef(\"\");var _useState3=useState(localStorage.getItem(localStorage.getItem(\"authenticated\")||false)),_useState4=_slicedToArray(_useState3,2),authenticated=_useState4[0],setauthenticated=_useState4[1];// const users = [\n//   { username: \"User\", password: \"Password\" },\n//   { username: \"Praneeth\", password: \"Password\" },\n//   { username: \"Admin\", password: \"Admin\" },\n// ];\nconsole.log(username.current.value,\" --- \",password.current.value);var handleSubmit=function handleSubmit(e){e.preventDefault();setloggedin(true);console.log(username.current.value,\" --- \",password.current.value);console.log(users);var account=users.data.find(function(user){return user.username===username.current.value;});localStorage.setItem(\"authenticated\",true);if(account&&account.password===password.current.value){setauthenticated(true);localStorage.setItem(\"authenticated\",true);navigate(\"./dashboard\",{state:{id:1,name:username.current.value}},{replace:true});}else{setloggedin(true);}};var Invalidcredentials=function Invalidcredentials(){return/*#__PURE__*/_jsx(\"div\",{className:loginStyle.invalid,children:\"Invalid Credentials\"});};return/*#__PURE__*/_jsxs(\"div\",{className:loginStyle.inputform,children:[/*#__PURE__*/_jsx(\"p\",{children:\"The Coffee Shop\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{className:loginStyle.btn,type:\"text\",name:\"Username\",ref:username,placeholder:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{className:loginStyle.btn,type:\"password\",name:\"Password\",ref:password,placeholder:\"Password\"}),loggedin&&/*#__PURE__*/_jsx(Invalidcredentials,{}),/*#__PURE__*/_jsx(\"input\",{className:loginStyle.btn,type:\"submit\",value:\"Submit\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return navigate(\"./newuser\",{replace:true});},children:\"New User\"})})]});};export default Login;","map":{"version":3,"names":["useEffect","useRef","useState","useNavigate","loginStyle","axios","jsx","_jsx","jsxs","_jsxs","Login","users","_useState","_useState2","_slicedToArray","loggedin","setloggedin","get","then","res","console","log","e","navigate","username","password","_useState3","localStorage","getItem","_useState4","authenticated","setauthenticated","current","value","handleSubmit","preventDefault","account","data","find","user","setItem","state","id","name","replace","Invalidcredentials","className","invalid","children","inputform","onSubmit","btn","type","ref","placeholder","onClick"],"sources":["/Users/praneetheraganaboina/Desktop/Learnings/PRJ_R/myapp/src/components/Login.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport loginStyle from \"./Login.module.css\";\nimport axios from \"axios\";\n\nconst Login = () => {\n  let users = null;\n  const [loggedin, setloggedin] = useState(false);\n  useEffect(() => {\n    try {\n      axios.get(`http://127.0.0.1:5000/login`).then((res) => {\n        console.log(\"result=\", res);\n        users = res;\n        console.log(\"users\", users);\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }, [loggedin]);\n  const navigate = useNavigate();\n  const username = useRef(\"\");\n  const password = useRef(\"\");\n  const [authenticated, setauthenticated] = useState(\n    localStorage.getItem(localStorage.getItem(\"authenticated\") || false)\n  );\n  // const users = [\n  //   { username: \"User\", password: \"Password\" },\n  //   { username: \"Praneeth\", password: \"Password\" },\n  //   { username: \"Admin\", password: \"Admin\" },\n  // ];\n  console.log(username.current.value, \" --- \", password.current.value);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setloggedin(true);\n    console.log(username.current.value, \" --- \", password.current.value);\n    console.log(users);\n    const account = users.data.find(\n      (user) => user.username === username.current.value\n    );\n    localStorage.setItem(\"authenticated\", true);\n    if (account && account.password === password.current.value) {\n      setauthenticated(true);\n      localStorage.setItem(\"authenticated\", true);\n      navigate(\n        \"./dashboard\",\n        { state: { id: 1, name: username.current.value } },\n        { replace: true }\n      );\n    } else {\n      setloggedin(true);\n    }\n  };\n  const Invalidcredentials = () => {\n    return <div className={loginStyle.invalid}>Invalid Credentials</div>;\n  };\n  return (\n    <div className={loginStyle.inputform}>\n      <p>The Coffee Shop</p>\n      <form onSubmit={handleSubmit}>\n        <input\n          className={loginStyle.btn}\n          type=\"text\"\n          name=\"Username\"\n          ref={username}\n          placeholder=\"Username\"\n        />\n        <input\n          className={loginStyle.btn}\n          type=\"password\"\n          name=\"Password\"\n          ref={password}\n          placeholder=\"Password\"\n        />\n        {loggedin && <Invalidcredentials />}\n        <input className={loginStyle.btn} type=\"submit\" value=\"Submit\" />\n      </form>\n      <div>\n        <a onClick={() => navigate(\"./newuser\", { replace: true })}>New User</a>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}