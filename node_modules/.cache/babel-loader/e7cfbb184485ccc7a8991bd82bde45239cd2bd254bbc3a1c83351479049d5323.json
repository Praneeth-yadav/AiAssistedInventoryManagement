{"ast":null,"code":"import _regeneratorRuntime from\"/Users/praneetheraganaboina/Desktop/Learnings/PRJ_R/myapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/praneetheraganaboina/Desktop/Learnings/PRJ_R/myapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/praneetheraganaboina/Desktop/Learnings/PRJ_R/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button,Input,InputGroup,InputLeftAddon,Select,Stack}from\"@chakra-ui/react\";import axios from\"axios\";import{getStorage}from\"firebase/storage\";import{useCallback,useRef,useState,useEffect}from\"react\";import Newitemstyle from\"./Newitem.module.css\";import{Uploadimage}from\"./Uploadimage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Newitem=function Newitem(_ref){var setload=_ref.setload;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),itemname=_useState2[0],setitemname=_useState2[1];var desc=useRef(null);var price=useRef(null);var qty=useRef(null);var category=useRef(null);var imageurl=useRef(null);var storage=getStorage();var imgurl=useCallback(function(murl){console.log(\"url is - \",murl);imageurl.current=murl;},[imageurl]);var checkimage=function checkimage(){if(imageurl.current==null){return true;}return false;};var additem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,date,day,month,year,currentDate,itemstoadd;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// const imgurl = await fetchurl();\n// if (imageurl==null) {\n//   console.log(\"Retrying to fetch image url...\");\n//   const retryURLFetched = await fetchurl();\n//   if (!retryURLFetched) {\n//     console.log(\"Still unable to fetch image url. Aborting item addition.\");\n//     alert(\"Item cannot be added. Try Again\");\n//     return;\n//   }\n// }\n/////////////\n// while (imageurl.current == null) {\n//   console.log(\"in while\");\n//   console.log(\"image current-1-\", imageurl.current);\n//   setTimeout(() => {\n//     console.log(\" process inprogress!\");\n//   }, 9000);\n//   await getDownloadURL(ref(storage, `images/${itemname}`))\n//     .then((url) => {\n//       imageurl.current = url;\n//       console.log(\"image url current\", imageurl.current);\n//     })\n//     .catch((error) => {\n//       console.log(\"Error retreiving image url\", error);\n//     });\n//   console.log(\"image current-2-\", imageurl.current);\n// }\ndata={desc:desc,price:price,qty:qty,category:category,imageurl:imageurl,storage:storage};console.log(\"item to be added -  \",data);date=new Date();day=date.getDate();month=date.getMonth()+1;year=date.getFullYear();// This arrangement can be altered based on how we want the date's format to appear.\ncurrentDate=\"\".concat(year,\"-\").concat(month,\"-\").concat(day);console.log(currentDate);itemstoadd={item:itemname,description:desc.current,price:price.current,quantity:qty.current,category:category.current.value,imagelocation:imageurl.current,createdDate:currentDate,updatedDate:currentDate,addedBy:\"Admin\"};try{axios.post(\"http://127.0.0.1:5000/additems\",itemstoadd).then(function(response){console.log(response.data);setload(true);});}catch(e){console.log(\"New Item cannot be added \",e);}case 10:case\"end\":return _context.stop();}},_callee);}));return function additem(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:Newitemstyle.iteminput,children:/*#__PURE__*/_jsxs(Stack,{spacing:4,children:[/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputLeftAddon,{children:\"Item Name\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Add Name\",onChange:function onChange(e){setitemname(e.target.value);}})]}),/*#__PURE__*/_jsxs(Select,{placeholder:\"Select Category\",onChange:function onChange(e){console.log(\"category\",e.target.value);category.current=e.target.value;},children:[/*#__PURE__*/_jsx(\"option\",{value:\"dessert\",children:\"dessert\"}),/*#__PURE__*/_jsx(\"option\",{value:\"coffee\",children:\"coffee\"}),/*#__PURE__*/_jsx(\"option\",{value:\"savoury\",children:\"savoury\"})]}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputLeftAddon,{children:\"Description\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Add description\",onChange:function onChange(e){desc.current=e.target.value;}})]}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputLeftAddon,{children:\"Available Quantity\"}),/*#__PURE__*/_jsx(Input,{type:\"number\",placeholder:\"Quantity\",onChange:function onChange(e){qty.current=e.target.value;}})]}),itemname!==null&&itemname!==\"\"?/*#__PURE__*/_jsx(Uploadimage,{name:itemname,imgurl:imgurl}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(InputGroup,{size:\"sm\",children:[/*#__PURE__*/_jsx(InputLeftAddon,{children:\"$\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Price\",onChange:function onChange(e){price.current=e.target.value;}})]}),/*#__PURE__*/_jsx(Button,{disabled:true,colorScheme:\"teal\",onClick:additem,children:\"Add Item\"})]})})});};","map":{"version":3,"names":["Button","Input","InputGroup","InputLeftAddon","Select","Stack","axios","getStorage","useCallback","useRef","useState","useEffect","Newitemstyle","Uploadimage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Newitem","_ref","setload","_useState","_useState2","_slicedToArray","itemname","setitemname","desc","price","qty","category","imageurl","storage","imgurl","murl","console","log","current","checkimage","additem","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","date","day","month","year","currentDate","itemstoadd","wrap","_callee$","_context","prev","next","Date","getDate","getMonth","getFullYear","concat","item","description","quantity","value","imagelocation","createdDate","updatedDate","addedBy","post","then","response","e","stop","apply","arguments","children","className","iteminput","spacing","type","placeholder","onChange","target","name","size","disabled","colorScheme","onClick"],"sources":["/Users/praneetheraganaboina/Desktop/Learnings/PRJ_R/myapp/src/components/Newitem.js"],"sourcesContent":["import {\n  Button,\n  Input,\n  InputGroup,\n  InputLeftAddon,\n  Select,\n  Stack,\n} from \"@chakra-ui/react\";\nimport axios from \"axios\";\nimport { getStorage } from \"firebase/storage\";\nimport { useCallback, useRef, useState, useEffect } from \"react\";\nimport Newitemstyle from \"./Newitem.module.css\";\nimport { Uploadimage } from \"./Uploadimage\";\n\nexport const Newitem = ({ setload }) => {\n  const [itemname, setitemname] = useState(null);\n  const desc = useRef(null);\n  const price = useRef(null);\n  const qty = useRef(null);\n  const category = useRef(null);\n  const imageurl = useRef(null);\n  const storage = getStorage();\n  const imgurl = useCallback(\n    (murl) => {\n      console.log(\"url is - \", murl);\n      imageurl.current = murl;\n    },\n    [imageurl]\n  );\n  const checkimage = () => {\n    if (imageurl.current == null) {\n      return true;\n    }\n    return false;\n  };\n\n  const additem = async () => {\n    // const imgurl = await fetchurl();\n\n    // if (imageurl==null) {\n    //   console.log(\"Retrying to fetch image url...\");\n    //   const retryURLFetched = await fetchurl();\n\n    //   if (!retryURLFetched) {\n    //     console.log(\"Still unable to fetch image url. Aborting item addition.\");\n    //     alert(\"Item cannot be added. Try Again\");\n    //     return;\n    //   }\n    // }\n    /////////////\n    // while (imageurl.current == null) {\n    //   console.log(\"in while\");\n    //   console.log(\"image current-1-\", imageurl.current);\n    //   setTimeout(() => {\n    //     console.log(\" process inprogress!\");\n    //   }, 9000);\n    //   await getDownloadURL(ref(storage, `images/${itemname}`))\n    //     .then((url) => {\n    //       imageurl.current = url;\n    //       console.log(\"image url current\", imageurl.current);\n    //     })\n    //     .catch((error) => {\n    //       console.log(\"Error retreiving image url\", error);\n    //     });\n    //   console.log(\"image current-2-\", imageurl.current);\n    // }\n    const data = { desc, price, qty, category, imageurl, storage };\n    console.log(\"item to be added -  \", data);\n    const date = new Date();\n    let day = date.getDate();\n    let month = date.getMonth() + 1;\n    let year = date.getFullYear();\n\n    // This arrangement can be altered based on how we want the date's format to appear.\n    let currentDate = `${year}-${month}-${day}`;\n    console.log(currentDate);\n    const itemstoadd = {\n      item: itemname,\n      description: desc.current,\n      price: price.current,\n      quantity: qty.current,\n      category: category.current.value,\n      imagelocation: imageurl.current,\n      createdDate: currentDate,\n      updatedDate: currentDate,\n      addedBy: \"Admin\",\n    };\n\n    try {\n      axios\n        .post(\"http://127.0.0.1:5000/additems\", itemstoadd)\n        .then((response) => {\n          console.log(response.data);\n          setload(true);\n        });\n    } catch (e) {\n      console.log(\"New Item cannot be added \", e);\n    }\n  };\n\n  return (\n    <>\n      <div className={Newitemstyle.iteminput}>\n        <Stack spacing={4}>\n          <InputGroup>\n            <InputLeftAddon children=\"Item Name\" />\n            <Input\n              type=\"text\"\n              placeholder=\"Add Name\"\n              onChange={(e) => {\n                setitemname(e.target.value);\n              }}\n            />\n          </InputGroup>\n          <Select\n            placeholder=\"Select Category\"\n            onChange={(e) => {\n              console.log(\"category\", e.target.value);\n              category.current = e.target.value;\n            }}\n          >\n            <option value=\"dessert\">dessert</option>\n            <option value=\"coffee\">coffee</option>\n            <option value=\"savoury\">savoury</option>\n          </Select>\n          <InputGroup>\n            <InputLeftAddon children=\"Description\" />\n            <Input\n              type=\"text\"\n              placeholder=\"Add description\"\n              onChange={(e) => {\n                desc.current = e.target.value;\n              }}\n            />\n          </InputGroup>\n          <InputGroup>\n            <InputLeftAddon children=\"Available Quantity\" />\n            <Input\n              type=\"number\"\n              placeholder=\"Quantity\"\n              onChange={(e) => {\n                qty.current = e.target.value;\n              }}\n            />\n          </InputGroup>\n          {itemname !== null && itemname !== \"\" ? (\n            <Uploadimage name={itemname} imgurl={imgurl} />\n          ) : (\n            <></>\n          )}\n          <InputGroup size=\"sm\">\n            <InputLeftAddon children=\"$\" />\n            <Input\n              placeholder=\"Price\"\n              onChange={(e) => {\n                price.current = e.target.value;\n              }}\n            />\n          </InputGroup>\n          <Button disabled={true} colorScheme=\"teal\" onClick={additem}>\n            Add Item\n          </Button>\n        </Stack>\n      </div>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}